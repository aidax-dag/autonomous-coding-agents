# ACA Agent 운영 규약 (Claude Code)

## 0. 미션

ACA를 린(Lean)하고 보안 중심이며 티켓 기반으로 동작하는 멀티에이전트 제품 개발 플랫폼으로 구축한다.
재사용 가능한 Feature 자산을 통해 시간/토큰 효율을 극대화한다.

## 1. 필수 스프린트 사이클

모든 작업은 아래 순서를 반드시 따른다.

1. 요구사항
2. 기능정의
3. 설계
4. 스펙정의
5. 구현
6. 테스트
7. 결과정리 및 분석
8. 새로운 요구사항 업데이트(다음 스프린트 입력)

단계 생략 또는 순서 변경 금지.

## 2. 게이트 규칙 (강제 중단)

아래 4개가 승인되기 전에는 구현을 시작하지 않는다.

1. 요구사항
2. 기능정의
3. 설계
4. 스펙정의

문서가 누락되면 구현을 중단하고 문서 보완 및 승인 요청을 먼저 수행한다.

## 3. 티켓 운영 표준

모든 티켓은 다음 정보를 필수로 포함한다.

1. 배경
2. 문제
3. 작업 상세 설명
4. 기대 산출물
5. 검증 방법 + 합격 조건 + 체크리스트
6. 생성 시각
7. 상태 (`created`, `in_progress`, `pending`, `reviewing`, `completed`, `cancelled`)

수행 중에는 다음 항목을 반드시 업데이트한다.

1. 시작 시각 / 종료 시각
2. 상태 전이 이력
3. 산출물 링크(코드/문서/파일)
4. 이슈/리스크/블로커
5. 리뷰 결과 (`approved` 또는 `changes_requested`)

## 4. 역할 분리 원칙

가능한 한 역할을 분리한다.

1. Planner Agent: 티켓 생성, 맥락 구조화
2. Executor Agent: 승인된 범위 구현
3. Reviewer Agent(들): 스펙/체크리스트 기준 검증

필수 리뷰어 전원 승인 전에는 완료 처리하지 않는다.

## 5. Feature 관리 원칙

Feature를 재사용 가능한 원자 단위 자산으로 다룬다.

각 Feature는 다음을 유지해야 한다.

1. 제목 + 설명 + 제약조건
2. 라벨/태그
3. 옵션(언어/적용영역/제한)
4. 산출물 링크 + 사용 가이드 링크
5. 버전 + 버전 이력
6. 리뷰 이력(휴먼/에이전트)
7. 재사용 추적(사용 횟수, 마지막 사용 시각)

재구현보다 재사용을 우선한다.

## 6. 아키텍처 및 프로토콜 원칙

1. MAL(Multi-Agent Abstraction Layer) 구조를 유지한다.
2. 에이전트 상호운용은 MCP/A2A를 기본으로 한다.
3. 스펙에 정의된 티켓 실행 경로에서는 MCP 준비 상태를 강제한다.
4. 원격 에이전트 사용은 요청/응답 추적이 가능해야 한다.

## 7. 보안/신뢰성 기준

1. 시큐어 코딩 기본 적용(입력 검증, 권한 경계, 시크릿 관리).
2. 숨겨진 사이드이펙트 금지, 상태 전이는 명시적으로 관리.
3. 의사결정 로그와 검증 근거를 남긴다.
4. 실패 가정과 교정 조치를 기록한다.

## 8. Claude Code 실행 규칙

1. 현재 파일과 가까운 경로의 `CLAUDE.md`를 함께 준수한다.
2. 승인된 스펙 기준으로만 구현한다.
3. 변경 범위는 현재 티켓으로 제한한다.
4. 변경 범위에 대한 관련 테스트를 실행한다.
5. 결과 보고 시 변경 파일, 테스트 결과, 잔여 리스크, 다음 액션을 포함한다.
6. 게이트 입력이 없으면 코딩을 중단하고 필요한 입력을 요청한다.

## 9. DoD (Definition of Done)

다음을 모두 만족해야 티켓 완료로 본다.

1. 스펙 범위 구현 완료
2. 필수 테스트 통과
3. 산출물 및 링크 기록 완료
4. 필수 리뷰 승인 완료
5. 결과 분석 문서화 완료
6. 다음 스프린트 요구사항 업데이트 완료
